[[query-plan-expand-into]]
== Expand Into ==
When both the start and end node have already been found, the `Expand(Into)` operator is used to find all relationships connecting the two nodes.
As both the start and end node of the relationship are already in scope, the node with the smallest degree will be used.
This can make a noticeable difference when dense nodes appear as end points.

.Query
include::includes/query-plan-expand-into.query.adoc[]



.Query Plan
[source]
----
Compiler CYPHER 4.4

Planner COST

Runtime PIPELINED

Runtime version 4.4

+-----------------+-------------------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| Operator        | Details                                               | Estimated Rows | Rows | DB Hits | Memory (Bytes) | Page Cache Hits/Misses | Time (ms) | Other               |
+-----------------+-------------------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +ProduceResults | fof                                                   |              0 |    0 |       0 |                |                        |           | Fused in Pipeline 0 |
| |               +-------------------------------------------------------+----------------+------+---------+----------------+                        |           +---------------------+
| +Filter         | not anon_0 = anon_1                                   |              0 |    0 |       0 |                |                        |           | Fused in Pipeline 0 |
| |               +-------------------------------------------------------+----------------+------+---------+----------------+                        |           +---------------------+
| +Expand(Into)   | (p)-[anon_0:FRIENDS_WITH]->(fof)                      |              0 |    0 |       0 |              0 |                        |           | Fused in Pipeline 0 |
| |               +-------------------------------------------------------+----------------+------+---------+----------------+                        |           +---------------------+
| +Expand(All)    | (p)<-[anon_1]-(fof)                                   |              0 |    0 |       3 |                |                        |           | Fused in Pipeline 0 |
| |               +-------------------------------------------------------+----------------+------+---------+----------------+                        |           +---------------------+
| +NodeIndexSeek  | BTREE INDEX p:Person(name) WHERE name = $autostring_0 |              1 |    1 |       2 |            112 |                    2/1 |     1.038 | Fused in Pipeline 0 |
+-----------------+-------------------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+

Total database accesses: 5, total allocated memory: 192

----
