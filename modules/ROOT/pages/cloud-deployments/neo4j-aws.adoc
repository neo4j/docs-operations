:description: Deploy Neo4j on Amazon Web Services (AWS) directly from the AWS Marketplace or by using the Neo4j CloudFormation templates hosted on GitHub.
[role=enterprise-edition]
[[aws]]
= Neo4j on AWS
:description: This chapter describes how to deploy Neo4j on AWS directly from the AWS Marketplace. 

You can deploy Neo4j on Amazon Web Services (AWS) directly from the AWS Marketplace or by using the Neo4j CloudFormation templates hosted on GitHub.

The AWS Marketplace represents a straightforward method to deploy Neo4j on Elastic Compute Cloud (EC2) instances in AWS.

The Neo4j Enterprise Edition listings (for both Neo4j 5 and 4.4) on the AWS Marketplace can be found at link:https://aws.amazon.com/marketplace/pp/prodview-akmzjikgawgn4[Neo4j Enterprise Edition on the AWS Marketplace].


In addition to the AWS Marketplace listings, Neo4j provides several CloudFormation templates, which can be customized to meet more complex use cases.
These templates are hosted in a public GitHub repository and can be found at link:https://github.com/neo4j-partners/amazon-cloud-formation-neo4j[Neo4j CloudFormation templates on GitHub].

Further custom templates, which serve other commonly requested use cases, can be on the same repository in the link:https://github.com/neo4j-partners/amazon-cloud-formation-neo4j/tree/main/custom-templates[custom-templates] directory.  
These custom templates are also freely available but are not part of the Neo4j official AWS Marketplace offering. 

[TIP]
====
The link:https://github.com/neo4j-partners/amazon-cloud-formation-neo4j[main] branch hosts the CodeFormation templates for Neo4j 5.  
A link:https://github.com/neo4j-partners/amazon-cloud-formation-neo4j/tree/4.4[separate] branch is maintained for the templates for Neo4j 4.4.
====

The official Neo4j AWS Marketplace listing uses the link:https://github.com/neo4j-partners/amazon-cloud-formation-neo4j/tree/main/marketplace/neo4j.template.yaml[marketplace] template to deploy Neo4j.

== Neo4j CloudFormation template

CloudFormation is a recipe that tells AWS how to deploy a whole set of interrelated resources.

The Neo4j CloudFormation templates have the following properties:

* Optionally install Graph Data Science (GDS).
It requires a license key to be provided.

* Optionally install Bloom.
It requires a license key to be provided.

* Specify the number of desired Neo4j instances.

* Select the EC2 instance type and disk size.

* Specify SSH CIDR range.


== Deploy Neo4j Enterprise (standalone or cluster)

To deploy a Neo4j Enterprise standalone or a Neo4j cluster, create a CloudFormation stack by launching the Neo4j CloudFormation template in AWS.

. Log in to the https://aws.amazon.com/console/[AWS management console].
. In the search field, look for _marketplace_ and select *AWS Marketplace Subscriptions*. +
. Navigate to *AWS Marketplace* -> *Discover products* and search for Neo4j.
. From the list, click *Neo4j Enterprise Edition*.
. Click the *Continue to Subscribe* button. +
You need a subscription to be able to launch Neo4j on AWS.
. Click the *Continue to Configuration* button. +
The window *Configure this software* opens.
The default configurations launch the latest version of Neo4j.
. Click the *Continue to Launch* button.
The window *Launch this software* opens.
. From the *Choose Action* dropdown menu, select *Launch CloudFormation* to load the Neo4j CloudFormation template, and click *Launch*.
. Fill in the following information to configure your Neo4j deployment:
.. The *Create stack* window specifies the template you are going to use.
Here, you do not need to do anything.
+
image:create-stack.png[]
.. The *Specify stack details* window contains various parameters that control your Neo4j and infrastructure:
* *Stack name* - the name of your stack.
* (Optional) Parameters for installing GDS or Bloom.
* *Password* - password for Neo4j.
* *Node Count* - the number of Neo4j instances.
If you want to launch a standalone, select 1, and if you are going to launch a cluster, select 3.
* *Instance Type* - the AWS instance type you want to launch, which controls your database capacity.
* *Disk Size* - the size in GB of EBS volume on each instance node.
The default is 100.
* *SSH CIDR* - the address range from which EC2 instances are accessible on port `22`.
You can set it to `0.0.0.0/0` to allow any IP on the internet to contact your instance(s).
If you want to lock it down to just your companyâ€™s IP block, this is where you must specify that.
+
image:stack-details.png[]
.. (Optional) On the *Configure stack options* window, you can specify tags to apply to the resources in your stack, stack permissions, as well as some advanced options.
.. On the *Review <stack-name>* window, review the stack configurations that you have selected.
If you are happy with them, tick *I acknowledge that AWS CloudFormation might create IAM resources*.
+
image:aws-acknowledgement.png[]
..  Click the button *Create stack*. +
The CloudFormation stack will deploy AWS resources for your Neo4j DBMS.

== Verify that Neo4j is up

When the CloudFormation stack is created, navigate to the *Outputs* tab and click the *Neo4jLoadBalancerURL*.

image:neo4j-lb.png[]

The URL takes you to Neo4j Browser, where you can use your credentials to log in to Neo4j.

image:neo4j-service.png[]

== Clean up the resources and remove your stack

Select the CloudFormation stack you want to remove and click the *Delete* button.
The stack deletion cleans up all AWS resources deployed by it.
