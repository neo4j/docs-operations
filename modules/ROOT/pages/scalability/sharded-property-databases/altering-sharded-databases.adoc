:page-role: new-2025.10 enterprise-edition not-on-aura
:description: Describes how to alter sharded property databases in Neo4j.

= Altering sharded property databases

You can alter a sharded property database on two levels.
It is possible to change the entire sharded database with `ALTER DATABASE` or alter a specific shard with `ALTER DATABASE <shard-name>`.

== Syntax

[options="header", width="100%", cols="1m,5a"]
|===
| Command | Syntax

| ALTER DATABASE <name>
|
[source, syntax, role="noheader"]
----
ALTER DATABASE name [IF EXISTS]
{
  SET ACCESS {READ ONLY \| READ WRITE} \|
  SET GRAPH SHARD {
    SET TOPOLOGY ((n PRIMAR{Y\|IES}) \| (m SECONDAR{Y\|IES}))+
  } \|
  SET PROPERTY SHARD {
    SET TOPOLOGY n REPLICA[S]
  }
}
[WAIT [n [SEC[OND[S]]]]\|NOWAIT]
----

| ALTER DATABASE <graph-shard>
|
[source, syntax, role="noheader"]
----
ALTER DATABASE name [IF EXISTS]
SET TOPOLOGY (
  (n PRIMAR{Y\|IES}) \|
  (m SECONDAR{Y\|IES})
)
[WAIT [n [SEC[OND[S]]]] \| NOWAIT]
----

| ALTER DATABASE <property-shard>
|
[source, syntax, role="noheader"]
----
ALTER DATABASE name [IF EXISTS]
SET TOPOLOGY (
  n REPLICA[S]
)
[WAIT [n [SEC[OND[S]]]] \| NOWAIT]
----

|===

== Example 1: Change the topology of the graph shard and all property shards

[source, cypher]
----
ALTER DATABASE foo-sharded
SET GRAPH SHARD {
 SET TOPOLOGY 1 PRIMARY 2 SECONDARIES
}
SET PROPERTY SHARDS {
  SET TOPOLOGY 1 REPLICA;
}
----

== Example 2: Change the topology of the graph shard

[source, cypher]
----
ALTER DATABASE `foo-sharded-g000`
SET TOPOLOGY 1 PRIMARY 2 SECONDARIES;
----

== Example 3: Change the topology of a specific property shard

[source, cypher]
----
ALTER DATABASE `foo-sharded-p000`
SET TOPOLOGY 2 REPLICAS;
----

[NOTE]
====
Resharding is currently not supported.
When the database is operational, altering a property shard can only be done by altering the number of replicas per graph shard.
====