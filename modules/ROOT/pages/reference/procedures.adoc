[[neo4j-procedures]]
= Procedures
:description: This page provides a complete reference to the Neo4j procedures. 

:description: Reference for Neo4j procedures.

This page provides a complete reference to the Neo4j procedures.
Available procedures depend on the type of installation you have:

* Neo4j Enterprise Edition provides a larger set of procedures than Neo4j Community Edition.
* Cluster members have procedures that are not available in standalone mode.

To check which procedures are available in your Neo4j DBMS, use the Cypher command `SHOW PROCEDURES`:

.List available procedures
====
[source, cypher]
----
SHOW PROCEDURES
----
====

[NOTE]
====
Some procedures can only be run by users with `Admin` privileges.
These are labeled with label:admin-only[].

For more information, see link:{neo4j-docs-base-uri}/cypher-manual/{page-version}/administration/access-control/manage-privileges/[Cypher Manual -> Manage Privileges].
====

== List of procedures

.Neo4j procedures
[options=header,cols="3m,1,1,3"]
|===
| Name
| Community Edition
| Enterprise Edition
| Comment

| xref:reference/procedures.adoc#procedure_db_awaitindex[`db.awaitIndex()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_awaitindexes[`db.awaitIndexes()`]
| label:yes[]
| label:yes[]
|


| xref:reference/procedures.adoc#procedure_db_checkpoint[`db.checkpoint()`]
| label:no[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_clearquerycaches[`db.clearQueryCaches()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_db_createlabel[`db.createLabel()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_createproperty[`db.createProperty()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_createrelationshiptype[`db.createRelationshipType()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_index_fulltext_awaiteventuallyconsistentindexrefresh[`db.index.fulltext.awaitEventuallyConsistentIndexRefresh()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_index_fulltext_listavailableanalyzers[`db.index.fulltext.listAvailableAnalyzers()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_index_fulltext_querynodes[`db.index.fulltext.queryNodes()`]
| label:yes[]
| label:yes[]
| In 4.1, signature changed to `db.index.fulltext.queryNodes(indexName :: STRING?, queryString :: STRING?, options = {} :: MAP?) :: (node :: NODE?, score :: FLOAT?)`.

| xref:reference/procedures.adoc#procedure_db_index_fulltext_queryrelationships[`db.index.fulltext.queryRelationships()`]
| label:yes[]
| label:yes[]
| In 4.1, signature changed to `db.index.fulltext.queryRelationships(indexName :: STRING?, queryString :: STRING?, options = {} :: MAP?) :: (relationship :: RELATIONSHIP?, score :: FLOAT?)`.

| xref:reference/procedures.adoc#procedure_db_info[`db.info()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_labels[`db.labels()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_listlocks[`db.listLocks()`]
| label:no[]
| label:yes[]
| label:admin-only[] +
In 4.2, signature changed to `db.listLocks() :: (mode :: STRING?, resourceType :: STRING?, resourceId :: INTEGER?, transactionId :: STRING?)`.

| xref:reference/procedures.adoc#procedure_db_ping[`db.ping()`]
| label:yes[]
| label:yes[]
|

// Bugfix in 4.0
// Default users are: admin
| xref:reference/procedures.adoc#procedure_db_prepareforreplanning[`db.prepareForReplanning()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_db_propertykeys[`db.propertyKeys()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_relationshiptypes[`db.relationshipTypes()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_resampleindex[`db.resampleIndex()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_resampleoutdatedindexes[`db.resampleOutdatedIndexes()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_schema_nodetypeproperties[`db.schema.nodeTypeProperties()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_db_schema_reltypeproperties[`db.schema.relTypeProperties()`]
| label:yes[]
| label:yes[]
| 

| xref:reference/procedures.adoc#procedure_db_schema_visualization[`db.schema.visualization()`]
| label:yes[]
| label:yes[]
|

// Bugfix in 4.0
// Default users are: admin
| xref:reference/procedures.adoc#procedure_db_stats_clear[`db.stats.clear()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

// Bugfix in 4.0
// Default users are: admin
| xref:reference/procedures.adoc#procedure_db_stats_collect[`db.stats.collect()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

// Bugfix in 4.0
// Default users are: admin
| xref:reference/procedures.adoc#procedure_db_stats_retrieve[`db.stats.retrieve()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

// Bugfix in 4.0
// Default users are: admin
| xref:reference/procedures.adoc#procedure_db_stats_retrieveallanonymized[`db.stats.retrieveAllAnonymized()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

// Bugfix in 4.0
// Default users are: admin
| xref:reference/procedures.adoc#procedure_db_stats_status[`db.stats.status()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

// Bugfix in 4.0
// Default users are: admin
| xref:reference/procedures.adoc#procedure_db_stats_stop[`db.stats.stop()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

// New in 5.0
// Only for admins
| xref:reference/procedures.adoc#procedure_dbms_checkconfigvalue[`dbms.checkConfigValue()`]
| label:no[]
| label:yes[]
| New in 5.0.

// New in 4.0
// Internal
// dbms.clientConfig()

| xref:reference/procedures.adoc#procedure_dbms_cluster_checkConnectivity[`dbms.cluster.checkConnectivity()`]
| label:no[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_cluster_cordonServer[`dbms.cluster.cordonServer()`] 
| label:no[]
| label:yes[]
| label:admin-only[]

// New in 4.0
// com.neo4j.causaulclustering.discovery.procedures.InstalledProtocolsProcedure
| xref:reference/procedures.adoc#procedure_dbms_cluster_protocols[`dbms.cluster.protocols()`]
| label:no[]
| label:yes[]
|

// New in 4.2
// com.neo4j.causaulclustering.discovery.procedures.ReadReplicaToggleProcedure
//deprecate in 5.6
| xref:reference/procedures.adoc#procedure_dbms_cluster_readreplicatoggle[`dbms.cluster.readReplicaToggle()`]
| label:no[]
| label:yes[]
| label:admin-only[] label:deprecated[] Deprecated in 5.6 and replaced by xref:reference/procedures.adoc#procedure_dbms_cluster_secondaryreplicationdisable[`dbms.cluster.secondaryReplicationDisable()`].

// New in 5.6
| xref:reference/procedures.adoc#procedure_dbms_cluster_secondaryreplicationdisable[`dbms.cluster.secondaryReplicationDisable()`]
| label:no[]
| label:yes[]
| label:admin-only[]

// Clustering is an Enterprise feature, the naming is weird.
// dbms.routing.getRoutingTable() does the same thing.
| xref:reference/procedures.adoc#procedure_dbms_cluster_routing_getroutingtable[`dbms.cluster.routing.getRoutingTable()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_dbms_cluster_uncordonServer[`dbms.cluster.uncordonServer()`]
| label:no[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_components[`dbms.components()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_dbms_info[`dbms.info()`]
| label:yes[]
| label:yes[]
|

// Community Edition in 4.2
| xref:reference/procedures.adoc#procedure_dbms_killconnection[`dbms.killConnection()`]
| label:yes[]
| label:yes[]
|

// Community Edition in 4.2
| xref:reference/procedures.adoc#procedure_dbms_killconnections[`dbms.killConnections()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_dbms_listactivelocks[`dbms.listActiveLocks()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_dbms_listcapabilities[`dbms.listCapabilities()`]
| label:yes[]
| label:yes[]
| 

| xref:reference/procedures.adoc#procedure_dbms_listconfig[`dbms.listConfig()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_listconnections[`dbms.listConnections()`]
| label:yes[]
| label:yes[]
|

// New in 4.1
| xref:reference/procedures.adoc#procedure_dbms_listpools[`dbms.listPools()`]
| label:no[]
| label:yes[]
|

// New in 4.3
| xref:reference/procedures.adoc#procedure_dbms_quarantineDatabase[`dbms.quarantineDatabase()`]
| label:no[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_queryjmx[`dbms.queryJmx()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_dbms_routing_getroutingtable[`dbms.routing.getRoutingTable()`]
| label:yes[]
| label:yes[]
| 

// New in 4.2
| xref:reference/procedures.adoc#procedure_dbms_scheduler_failedjobs[`dbms.scheduler.failedJobs()`]
| label:no[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_scheduler_groups[`dbms.scheduler.groups()`]
| label:no[]
| label:yes[]
| label:admin-only[]

// New in 4.2
| xref:reference/procedures.adoc#procedure_dbms_scheduler_jobs[`dbms.scheduler.jobs()`]
| label:no[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_security_clearauthcache[`dbms.security.clearAuthCache()`]
| label:no[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_setconfigvalue[`dbms.setConfigValue()`]
| label:no[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_setDatabaseAllocator[`dbms.setDatabaseAllocator()`]
| label:no[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_setDefaultAllocationNumbers[`dbms.setDefaultAllocationNumbers()`]
| label:no[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_dbms_setDefaultDatabase[`dbms.setDefaultDatabase()`]
| label:no[]
| label:yes[]
| label:admin-only[]


| xref:reference/procedures.adoc#procedure_dbms_showcurrentuser[`dbms.showCurrentUser()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_dbms_showTopologyGraphConfig[`dbms.showTopologyGraphConfig()`]
| label:no[]
| label:yes[]
| label:admin-only[]

// New in 4.1
| xref:reference/procedures.adoc#procedure_dbms_upgrade[`dbms.upgrade()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

// New in 4.1
| xref:reference/procedures.adoc#procedure_dbms_upgradestatus[`dbms.upgradeStatus()`]
| label:yes[]
| label:yes[]
| label:admin-only[]

| xref:reference/procedures.adoc#procedure_tx_getmetadata[`tx.getMetaData()`]
| label:yes[]
| label:yes[]
|

| xref:reference/procedures.adoc#procedure_tx_setmetadata[`tx.setMetaData()`]
| label:yes[]
| label:yes[]
|

|===


== List of removed procedures


.Removed Neo4j procedures
[options=header,cols="3m,1,1,3"]
|===
| Name
| Community Edition
| Enterprise Edition
| Comment
| xref:reference/procedures.adoc#procedure_db_constraints[`db.constraints()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `SHOW CONSTRAINTS`.

| xref:reference/procedures.adoc#procedure_db_createindex[`db.createIndex()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `CREATE INDEX`.

| xref:reference/procedures.adoc#procedure_db_createnodekey[`db.createNodeKey()`]
| label:no[]
| label:yes[]
| label:removed[] +
Replaced by: `CREATE CONSTRAINT ... IS NODE KEY`.

| xref:reference/procedures.adoc#procedure_db_createuniquepropertyconstraint[`db.createUniquePropertyConstraint()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `CREATE CONSTRAINT ... IS UNIQUE`.

| xref:reference/procedures.adoc#procedure_db_indexes[`db.indexes()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `SHOW INDEXES`.

| xref:reference/procedures.adoc#procedure_db_indexDetails[`db.indexDetails()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `SHOW INDEXES YIELD*`.

| xref:reference/procedures.adoc#procedure_db_index_fulltext_createnodeindex[`db.index.fulltext.createNodeIndex()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `CREATE FULLTEXT INDEX ...`.

| xref:reference/procedures.adoc#procedure_db_index_fulltext_createrelationshipindex[`db.index.fulltext.createRelationshipIndex()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `CREATE FULLTEXT INDEX ...`.

| xref:reference/procedures.adoc#procedure_db_index_fulltext_drop[`db.index.fulltext.drop()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `DROP INDEX ...`.

| xref:reference/procedures.adoc#procedure_db_schema_statements[`db.schema.statements()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `SHOW INDEXES YIELD *` and `SHOW CONSTRAINTS YIELD *`.

// New in 4.0
// com.neo4j.causaulclustering.discovery.procedures.ClusterOverviewProcedure
| xref:reference/procedures.adoc#procedure_dbms_cluster_overview[`dbms.cluster.overview()`]
| label:no[]
| label:yes[]
| label:removed[] +
Replaced by: `SHOW SERVERS`.


// New in 4.2
// com.neo4j.dbms.procedures.QuarantineProcedure
| xref:reference/procedures.adoc#procedure_dbms_cluster_quarantinedatabase[`dbms.cluster.quarantineDatabase()`]
| label:no[]
| label:yes[]
| label:removed[] +
Replaced by: `dbms.quarantineDatabase()`.


// New in 4.0
// Removed in 5.0
// com.neo4j.causaulclustering.discovery.procedures.RoleProcedure
| xref:reference/procedures.adoc#procedure_dbms_cluster_role[`dbms.cluster.role()`]
| label:no[]
| label:yes[]
| label:removed[] +
Replaced by: `SHOW DATABASES`.

// New in 4.1
// Removed in 5.0
// com.neo4j.dbms.procedures.ClusterSetDefaultDatabaseProcedure
| xref:reference/procedures.adoc#procedure_dbms_cluster_setdefaultdatabase[`dbms.cluster.setDefaultDatabase()`]
| label:no[]
| label:yes[]
| label:removed[] + 
Replaced by: `dbms.setDefaultDatabase`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_database_state[`dbms.database.state()`]
| label:yes[]
| label:yes[]
| label:removed[] + 
Replaced by: `SHOW DATABASES`.

| xref:reference/procedures.adoc#procedure_dbms_functions[`dbms.functions()`]
| label:yes[]
| label:yes[]
| label:removed[] + 
Replaced by: `SHOW FUNCTIONS`.

| xref:reference/procedures.adoc#procedure_dbms_killqueries[`dbms.killQueries()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `TERMINATE TRANSACTIONS`.

| xref:reference/procedures.adoc#procedure_dbms_killquery[`dbms.killQuery()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `TERMINATE TRANSACTIONS`.

| xref:reference/procedures.adoc#procedure_dbms_killtransaction[`dbms.killTransaction()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `TERMINATE TRANSACTIONS`.

| xref:reference/procedures.adoc#procedure_dbms_killtransactions[`dbms.killTransactions()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `TERMINATE TRANSACTIONS`.

| xref:reference/procedures.adoc#procedure_dbms_listqueries[`dbms.listQueries()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `SHOW TRANSACTIONS`.

| xref:reference/procedures.adoc#procedure_dbms_listtransactions[`dbms.listTransactions()`]
| label:yes[]
| label:yes[]
| label:removed[] +
Replaced by: `SHOW TRANSACTIONS`.


| xref:reference/procedures.adoc#procedure_dbms_procedures[`dbms.procedures()`]
| label:no[]
| label:yes[]
| label:removed[] +
Replaced by: `SHOW PROCEDURES`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_activateuser[`dbms.security.activateUser()`]
| label:no[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `ALTER USER`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_addroletouser[`dbms.security.addRoleToUser()`]
| label:no[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `GRANT ROLE TO USER`.

// Removed in 5.0
// newSet( READER, EDITOR, PUBLISHER, ARCHITECT, ADMIN )
| xref:reference/procedures.adoc#procedure_dbms_security_changepassword[`dbms.security.changePassword()`]
| label:yes[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `ALTER CURRENT USER SET PASSWORD`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_changeuserpassword[`dbms.security.changeUserPassword()`]
| label:no[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `ALTER USER`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_createrole[`dbms.security.createRole()`]
| label:no[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `CREATE ROLE`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_createuser[`dbms.security.createUser()`]
| label:yes[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `CREATE USER`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_deleterole[`dbms.security.deleteRole()`]
| label:no[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `DROP ROLE`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_deleteuser[`dbms.security.deleteUser()`]
| label:yes[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `DROP USER`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_listroles[`dbms.security.listRoles()`]
| label:yes[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `read`. +
Replaced by: `SHOW ROLES`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_listrolesforuser[`dbms.security.listRolesForUser()`]
| label:no[]
| label:yes[]
| label:removed[] +
In 4.1, mode changed to `read`. +
Replaced by: `SHOW USERS`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_listusers[`dbms.security.listUsers()`]
| label:yes[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `read`. +
Replaced by: `SHOW USERS`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_listusersforrole[`dbms.security.listUsersForRole()`]
| label:no[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `read`. +
Replaced by: `SHOW ROLES WITH USERS`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_removerolefromuser[`dbms.security.removeRoleFromUser()`]
| label:no[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `REVOKE ROLE FROM USER`.

// Removed in 5.0
| xref:reference/procedures.adoc#procedure_dbms_security_suspenduser[`dbms.security.suspendUser()`]
| label:no[]
| label:yes[]
| label:removed[] label:admin-only[] +
In 4.1, mode changed to `write`. +
Replaced by: `ALTER USER`.

|===

== Procedure descriptions


[[procedure_db_awaitindex]]
.db.awaitIndex()
[cols="<15s,<85"]
|===
| Description
a|
Wait for an index to come online.

Example: `CALL db.awaitIndex("MyIndex", 300)`
| Signature
m|db.awaitIndex(indexName :: STRING?, timeOutSeconds = 300 :: INTEGER?) :: VOID
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_awaitindexes]]
.db.awaitIndexes()
[cols="<15s,<85"]
|===
| Description
a|
Wait for all indexes to come online.

Example: `CALL db.awaitIndexes(300)`
| Signature
m|db.awaitIndexes(timeOutSeconds = 300 :: INTEGER?) :: VOID
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_checkpoint]]
.db.checkpoint() label:enterprise-edition[]
[cols="<15s,<85"]
|===
| Description
a|
Initiate and wait for a new check point, or wait any already on-going check point to complete.

Note that this temporarily disables the `db.checkpoint.iops.limit` setting in order to make the check point complete faster.
This might cause transaction throughput to degrade slightly, due to increased IO load.
| Signature
m|db.checkpoint() :: (success :: BOOLEAN?, message :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_clearquerycaches]]
.db.clearQueryCaches() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Clears all query caches.
| Signature
m|db.clearQueryCaches() :: (value :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|admin
|===


[[procedure_db_createlabel]]
.db.createLabel()
[cols="<15s,<85"]
|===
| Description
a|
Create a label
| Signature
m|db.createLabel(newLabel :: STRING?) :: VOID
| Mode
m|WRITE
// | Default roles
// m|publisher, architect, admin
|===


[[procedure_db_createnodekey]]
.db.createNodeKey() label:enterprise-edition[] label:deprecated[Deprecated in 4.2]
[cols="<15s,<85"]
|===
| Description
a|
Create a named node key constraint.
Backing index will use specified index provider and configuration (optional).

Yield: name, labels, properties, providerName, status
| Signature
m|db.createNodeKey(constraintName :: STRING?, labels :: LIST? OF STRING?, properties :: LIST? OF STRING?, providerName :: STRING?, config = {} :: MAP?) :: (name :: STRING?, labels :: LIST? OF STRING?, properties :: LIST? OF STRING?, providerName :: STRING?, status :: STRING?)
| Mode
m|SCHEMA
// | Default roles
// m|architect, admin
| Replaced by
a|`CREATE CONSTRAINT ... IS NODE KEY`.
For more information, see link:{neo4j-docs-base-uri}/cypher-manual/{page-version}/administration/access-control/database-administration[Database administration].
|===


[[procedure_db_createproperty]]
.db.createProperty()
[cols="<15s,<85"]
|===
| Description
a|
Create a Property
| Signature
m|db.createProperty(newProperty :: STRING?) :: VOID
| Mode
m|WRITE
// | Default roles
// m|publisher, architect, admin
|===


[[procedure_db_createrelationshiptype]]
.db.createRelationshipType()
[cols="<15s,<85"]
|===
| Description
a|
Create a RelationshipType
| Signature
m|db.createRelationshipType(newRelationshipType :: STRING?) :: VOID
| Mode
m|WRITE
// | Default roles
// m|publisher, architect, admin
|===


[[procedure_db_index_fulltext_awaiteventuallyconsistentindexrefresh]]
.db.index.fulltext.awaitEventuallyConsistentIndexRefresh()
[cols="<15s,<85"]
|===
| Description
a|
Wait for the updates from recently committed transactions to be applied to any eventually-consistent full-text indexes.
| Signature
m|db.index.fulltext.awaitEventuallyConsistentIndexRefresh() :: VOID
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_index_fulltext_listavailableanalyzers]]
.db.index.fulltext.listAvailableAnalyzers()
[cols="<15s,<85"]
|===
| Description
a|
List the available analyzers that the full-text indexes can be configured with.
| Signature
m|db.index.fulltext.listAvailableAnalyzers() :: (analyzer :: STRING?, description :: STRING?, stopwords :: LIST? OF STRING?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_index_fulltext_querynodes]]
.db.index.fulltext.queryNodes()
[cols="<15s,<85"]
|===
| Description
a|
Query the given full-text index.

Returns the matching nodes and their Lucene query score, ordered by score.

Valid _key: value_ pairs for the `options` map are:

* `skip: <number>` -- skip the top N results.
* `limit: <number>` -- limit the number of results returned.
* `analyzer: <string>` -- use the specified analyzer as a search analyzer for this query.

The `options` map and any of the keys are optional.
An example of the `options` map: `{skip: 30, limit: 10, analyzer: 'whitespace'}`
| Signature
m|db.index.fulltext.queryNodes(indexName :: STRING?, queryString :: STRING?, options = {} :: MAP?) :: (node :: NODE?, score :: FLOAT?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_index_fulltext_queryrelationships]]
.db.index.fulltext.queryRelationships()
[cols="<15s,<85"]
|===
| Description
a|
Query the given full-text index.

Returns the matching relationships and their Lucene query score, ordered by score.

Valid _key: value_ pairs for the `options` map are:

* `skip: <number>` -- skip the top N results.
* `limit: <number>` -- limit the number of results returned.
* `analyzer: <string>` -- use the specified analyzer as a search analyzer for this query.

The `options` map and any of the keys are optional.
An example of the `options` map: `{skip: 30, limit: 10, analyzer: 'whitespace'}`
| Signature
m|db.index.fulltext.queryRelationships(indexName :: STRING?, queryString :: STRING?, options = {} :: MAP?) :: (relationship :: RELATIONSHIP?, score :: FLOAT?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_info]]
.db.info()
[cols="<15s,<85"]
|===
| Description
a|
Provides information regarding the database.
| Signature
m|db.info() :: (id :: STRING?, name :: STRING?, creationDate :: STRING?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_labels]]
.db.labels()
[cols="<15s,<85"]
|===
| Description
a|
List all available labels in the database.
| Signature
m|db.labels() :: (label :: STRING?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_listlocks]]
.db.listLocks() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
List all locks at this database.
| Signature
m|db.listLocks() :: (mode :: STRING?, resourceType :: STRING?, resourceId :: INTEGER?, transactionId :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|admin
|===


[[procedure_db_ping]]
.db.ping()
[cols="<15s,<85"]
|===
| Description
a|
This procedure can be used by client side tooling to test whether they are correctly connected to a database.
The procedure is available in all databases and always returns true.
A faulty connection can be detected by not being able to call this procedure.
| Signature
m|db.ping() :: (success :: BOOLEAN?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_prepareforreplanning]]
.db.prepareForReplanning() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Triggers an index resample and waits for it to complete, and after that clears query caches.
After this procedure has finished queries will be planned using the latest database statistics.
| Signature
m|db.prepareForReplanning(timeOutSeconds = 300 :: INTEGER?) :: VOID
| Mode
m|READ
// | Default roles
// m|admin
|===


[[procedure_db_propertykeys]]
.db.propertyKeys()
[cols="<15s,<85"]
|===
| Description
a|
List all property keys in the database.
| Signature
m|db.propertyKeys() :: (propertyKey :: STRING?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_relationshiptypes]]
.db.relationshipTypes()
[cols="<15s,<85"]
|===
| Description
a|
List all available relationship types in the database.
| Signature
m|db.relationshipTypes() :: (relationshipType :: STRING?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_resampleindex]]
.db.resampleIndex()
[cols="<15s,<85"]
|===
| Description
a|
Schedule resampling of an index.

Example: `CALL db.resampleIndex("MyIndex")`
| Signature
m|db.resampleIndex(indexName :: STRING?) :: VOID
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_resampleoutdatedindexes]]
.db.resampleOutdatedIndexes()
[cols="<15s,<85"]
|===
| Description
a|
Schedule resampling of all outdated indexes.
| Signature
m|db.resampleOutdatedIndexes() :: VOID
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_schema_nodetypeproperties]]
.db.schema.nodeTypeProperties()
[cols="<15s,<85"]
|===
| Description
a|
Show the derived property schema of the nodes in tabular form.
| Signature
m|db.schema.nodeTypeProperties() :: (nodeType :: STRING?, nodeLabels :: LIST? OF STRING?, propertyName :: STRING?, propertyTypes :: LIST? OF STRING?, mandatory :: BOOLEAN?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_schema_reltypeproperties]]
.db.schema.relTypeProperties()
[cols="<15s,<85"]
|===
| Description
a|
Show the derived property schema of the relationships in tabular form.
| Signature
m|db.schema.relTypeProperties() :: (relType :: STRING?, propertyName :: STRING?, propertyTypes :: LIST? OF STRING?, mandatory :: BOOLEAN?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_schema_visualization]]
.db.schema.visualization()
[cols="<15s,<85"]
|===
| Description
a|
Visualizes the schema of the data based on available statistics. A new node is returned for each label.
The properties represented on the node include `name` (label name), `indexes` (list of indexes), and `constraints` (list of constraints).
A relationship of a given type is returned for all possible combinations of start and end nodes.
Note that this may include additional relationships that do not exist in the data due to the information available in the count store.
| Signature
m|db.schema.visualization() :: (nodes :: LIST? OF NODE?, relationships :: LIST? OF RELATIONSHIP?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_db_stats_clear]]
.db.stats.clear() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Clear collected data of a given data section.

Valid sections are `'QUERIES'`
| Signature
m|db.stats.clear(section :: STRING?) :: (section :: STRING?, success :: BOOLEAN?, message :: STRING?)
| Mode
m|READ
// | Default roles
// m|admin
|===


[[procedure_db_stats_collect]]
.db.stats.collect() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Start data collection of a given data section.

Valid sections are `'QUERIES'`
| Signature
m|db.stats.collect(section :: STRING?, config = {} :: MAP?) :: (section :: STRING?, success :: BOOLEAN?, message :: STRING?)
| Mode
m|READ
// | Default roles
// m|admin
|===


[[procedure_db_stats_retrieve]]
.db.stats.retrieve() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Retrieve statistical data about the current database.

Valid sections are `'GRAPH COUNTS', 'TOKENS', 'QUERIES', 'META'`
| Signature
m|db.stats.retrieve(section :: STRING?, config = {} :: MAP?) :: (section :: STRING?, data :: MAP?)
| Mode
m|READ
// | Default roles
// m|admin
|===


[[procedure_db_stats_retrieveallanonymized]]
.db.stats.retrieveAllAnonymized() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Retrieve all available statistical data about the current database, in an anonymized form.
| Signature
m|db.stats.retrieveAllAnonymized(graphToken :: STRING?, config = {} :: MAP?) :: (section :: STRING?, data :: MAP?)
| Mode
m|READ
// | Default roles
// m|admin
|===


[[procedure_db_stats_status]]
.db.stats.status() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Retrieve the status of all available collector daemons, for this database.
| Signature
m|db.stats.status() :: (section :: STRING?, status :: STRING?, data :: MAP?)
| Mode
m|READ
// | Default roles
// m|admin
|===


[[procedure_db_stats_stop]]
.db.stats.stop() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Stop data collection of a given data section.

Valid sections are `'QUERIES'`
| Signature
m|db.stats.stop(section :: STRING?) :: (section :: STRING?, success :: BOOLEAN?, message :: STRING?)
| Mode
m|READ
// | Default roles
// m|admin
|===

[[procedure_dbms_checkconfigvalue]]
.dbms.checkConfigValue() label:enterprise-edition[]
[cols="<15s,<85"]
|===
| Description
a|
This procedure provides feedback about the validity of a setting value.
It does not change the setting.

The procedure returns:

* `valid`: if the value is valid.
A valid value for a non-dynamic setting requires a restart.
* `message`: a message describing the reason for the invalidity.
The message is empty if the value is `valid` and the setting is dynamic.

| Signature
m|dbms.checkConfigValue(setting :: STRING?, value :: STRING?) :: (valid :: BOOLEAN?, message :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|admin
|===

[[procedure_dbms_cluster_checkConnectivity]]
.dbms.cluster.checkConnectivity() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Checks the connectivity of this instance to other cluster members. 
Not all ports are relevant to all members. 
Valid values for 'port-name' are: [CLUSTER, RAFT].
| Signature
m|dbms.cluster.checkConnectivity
| Mode
m|DBMS
|===

[[procedure_dbms_cluster_cordonServer]]
.dbms.cluster.cordonServer() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a| Marks a server in the topology as not suitable for new allocations. 
It will not force current allocations off the server. 
This is useful when deallocating databases when you have multiple unavailable servers.
| Signature
m|dbms.cluster.cordonServer(server :: STRING?)
| Mode
m|WRITE
|===


[[procedure_dbms_cluster_routing_getroutingtable]]
.dbms.cluster.routing.getRoutingTable()
[cols="<15s,<85"]
|===
| Description
a|
Returns endpoints of this instance.
Used in disaster recovery.
| Signature
m|dbms.cluster.routing.getRoutingTable(context :: MAP?, database = null :: STRING?) :: (ttl :: INTEGER?, servers :: LIST? OF MAP?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===

[[procedure_dbms_cluster_protocols]]
.dbms.cluster.protocols() label:enterprise-edition[]
[cols="<15s,<85"]
|===
| Description
a|
Overview of installed protocols.

Note that this can only be executed on a cluster core member.
| Signature
m|dbms.cluster.protocols() :: (orientation :: STRING?, remoteAddress :: STRING?, applicationProtocol :: STRING?, applicationProtocolVersion :: INTEGER?, modifierProtocols :: STRING?)
| Mode
m|READ
// | Default roles
// m|reader, editor, publisher, architect, admin
|===

//deprecate in 5.6
[[procedure_dbms_cluster_readreplicatoggle]]
.dbms.cluster.readReplicaToggle() label:enterprise-edition[] label:admin-only[] label:deprecated[]
[cols="<15s,<85"]
|===
| Description
a|
The toggle can pause or resume the pulling of new transactions for a specific database.
If paused, the database secondary does not pull new transactions from the other cluster members for the specific database.
The database secondary is still available for reads, you can perform a backup, etc.
Deprecated in 5.6 and replaced by xref:reference/procedures.adoc#procedure_dbms_cluster_secondaryreplicationdisable[`dbms.cluster.secondaryReplicationDisable()`].

[TIP]
====
_What is it for?_

You can perform a point in time backup, as the backup will contain only the transactions up to the point where the transaction pulling was paused.
Follow these steps to do so:

. Connect directly to the server hosting the database in secondary mode. (Neo4j Driver use `bolt://` or use the HTTP API).
. Pause transaction pulling for the specified database.
. Back up the database, see xref:backup-restore/online-backup.adoc[Back up an online database].

If connected directly to a server hosting a database in secondary mode, Data Scientists can execute analysis on a specific database that is paused, the data will not unexpectedly change while performing the analysis.
====

[NOTE]
====
This procedure can only be executed on a database which runs in a secondary role on the connected server.
====

.Pause transaction pulling for database `neo4j`
[source, cypher, role="noheader"]
----
CALL dbms.cluster.readReplicaToggle("neo4j", true)
----

.Resume transaction pulling for database `neo4j`
[source, cypher, role="noheader"]
----
CALL dbms.cluster.readReplicaToggle("neo4j", false)
----

| Signature
m|dbms.cluster.readReplicaToggle(databaseName :: STRING?, pause :: BOOLEAN?) :: (state :: STRING?)
| Mode
m|READ
// | Default roles
// m|admin
|===

New in 5.6
[[procedure_dbms_cluster_secondaryreplicationdisable]]
.dbms.cluster.secondaryReplicationDisable() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
The toggle can pause or resume the pulling of new transactions for a specific database.
If paused, the database secondary does not pull new transactions from the other cluster members for the specific database.
The database secondary is still available for reads, you can perform a backup, etc.

[TIP]
====
_What is it for?_

You can perform a point-in-time backup, as the backup will contain only the transactions up to the point where the transaction pulling was paused.
Follow these steps to do so:

. Connect directly to the server hosting the database in secondary mode. (Neo4j Driver use `bolt://` or use the HTTP API).
. Pause transaction pulling for the specified database.
. Back up the database, see xref:backup-restore/online-backup.adoc[Back up an online database].

If connected directly to a server hosting a database in secondary mode, Data Scientists can execute analysis on a specific database that is paused, the data will not unexpectedly change while performing the analysis.
====

[NOTE]
====
This procedure can only be executed on a database which runs in a secondary role on the connected server.
====

.Pause transaction pulling for database `neo4j`
[source, cypher, role="noheader"]
----
CALL dbms.cluster.secondaryReplicationDisable("neo4j", true)
----

.Resume transaction pulling for database `neo4j`
[source, cypher, role="noheader"]
----
CALL dbms.cluster.secondaryReplicationDisable("neo4j", false)
----

| Signature
m|dbms.cluster.secondaryReplicationDisable(databaseName :: STRING?, pause :: BOOLEAN?) :: (state :: STRING?)
| Mode
m|READ
// | Default roles
// m|admin
|===

[[procedure_dbms_cluster_uncordonServer]]
.dbms.cluster.uncordonServer() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a| Removes the cordon on a server, returning it to 'enabled'.
| Signature
m| dbms.cluster.uncordonServer(server :: STRING?)
| Mode
m| WRITE
|===


[[procedure_dbms_components]]
.dbms.components()
[cols="<15s,<85"]
|===
| Description
a|
List DBMS components and their versions.
| Signature
m|dbms.components() :: (name :: STRING?, versions :: LIST? OF STRING?, edition :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===

[[procedure_dbms_info]]
.dbms.info()
[cols="<15s,<85"]
|===
| Description
a|
Provides information regarding the DBMS.
| Signature
m|dbms.info() :: (id :: STRING?, name :: STRING?, creationDate :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_dbms_killconnection]]
.dbms.killConnection()
[cols="<15s,<85"]
|===
| Description
a|
Kill network connection with the given connection id.
| Signature
m|dbms.killConnection(id :: STRING?) :: (connectionId :: STRING?, username :: STRING?, message :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_dbms_killconnections]]
.dbms.killConnections()
[cols="<15s,<85"]
|===
| Description
a|
Kill all network connections with the given connection ids.
| Signature
m|dbms.killConnections(ids :: LIST? OF STRING?) :: (connectionId :: STRING?, username :: STRING?, message :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_dbms_listactivelocks]]
.dbms.listActiveLocks() label:enterprise-edition[]
[cols="<15s,<85"]
|===
| Description
a|
List the active lock requests granted for the transaction executing the query with the given query id.
| Signature
m|dbms.listActiveLocks(queryId :: STRING?) :: (mode :: STRING?, resourceType :: STRING?, resourceId :: INTEGER?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===

[[procedure_dbms_listcapabilities]]
.dbms.listCapabilities()
[cols="<15s,<85"]
|===
| Description
a|
List capabilities.
| Signature
m|dbms.listCapabilities() :: (name :: STRING?, description :: STRING?, value :: ANY?)
| Mode
m|DBMS
|===

[[procedure_dbms_listconfig]]
.dbms.listConfig() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
List all configuration settings whose names include the `searchString`, or all configuration settings if `searchString` is omitted.

Use this procedure to check a setting's values, investigate when a value was set, or find information on valid values.

Results include:

* `value`: the current value of the setting.
* `dynamic`: true if the value can be changed at runtime, or false if it requires a restart.
* `defaultValue`: the default value of the setting.
* `startupValue`: the value when the server was started, after _neo4j.conf_ and command line arguments have been applied.
* `explicitlySet`: true if the value was set explicitly, or false if it was set by default.
* `validValues`: contains information on data types and possible values for the settings.

| Signature
m|dbms.listConfig(searchString =  :: STRING?) :: (name :: STRING?, description :: STRING?, value :: STRING?, dynamic :: BOOLEAN?, defaultValue :: STRING?, startupValue :: STRING?, explicitlySet :: BOOLEAN?, validValues :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|admin
|===

[[procedure_dbms_listconnections]]
.dbms.listConnections()
[cols="<15s,<85"]
|===
| Description
a|
List all accepted network connections at this instance that are visible to the user.
| Signature
m|dbms.listConnections() :: (connectionId :: STRING?, connectTime :: STRING?, connector :: STRING?, username :: STRING?, userAgent :: STRING?, serverAddress :: STRING?, clientAddress :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===

[[procedure_dbms_listpools]]
.dbms.listPools() label:enterprise-edition[]
[cols="<15s,<85"]
|===
| Description
a|
List all memory pools, including sub pools, currently registered at this instance that are visible to the user.
| Signature
m|dbms.listPools() :: (pool :: STRING?, databaseName :: STRING?, heapMemoryUsed :: STRING?, heapMemoryUsedBytes :: STRING?, nativeMemoryUsed :: STRING?, nativeMemoryUsedBytes :: STRING?, freeMemory :: STRING?, freeMemoryBytes :: STRING?, totalPoolMemory :: STRING?, totalPoolMemoryBytes :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===

[[procedure_dbms_quarantineDatabase]]
.dbms.quarantineDatabase() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Place a database in quarantine or remove thereof.
It must be executed over `bolt://`.
| Signature
m|dbms.quarantineDatabase(databaseName :: STRING?, setStatus :: BOOLEAN?, reason = No reason given :: STRING?) :: (databaseName :: STRING?, quarantined :: BOOLEAN?, result :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|admin
|===

[[procedure_dbms_queryjmx]]
.dbms.queryJmx()
[cols="<15s,<85"]
|===
| Description
a|
Query JMX management data by domain and name.

Valid queries should use the syntax outlined in the link:https://docs.oracle.com/en/java/javase/11/docs/api/java.management/javax/management/ObjectName.html[javax.management.ObjectName API documentation]. +
For instance, use `+"*:*"+` to find all JMX beans.
| Signature
m|dbms.queryJmx(query :: STRING?) :: (name :: STRING?, description :: STRING?, attributes :: MAP?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_dbms_routing_getroutingtable]]
.dbms.routing.getRoutingTable()
[cols="<15s,<85"]
|===
| Description
a|
Returns endpoints of this instance.
| Signature
m|dbms.routing.getRoutingTable(context :: MAP?, database = null :: STRING?) :: (ttl :: INTEGER?, servers :: LIST? OF MAP?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===

[[procedure_dbms_setDatabaseAllocator]]
.dbms.setDatabaseAllocator() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a| With this method you can set the allocator, which is responsible to select servers for hosting databases. The only current option is `EQUAL_NUMBERS`.
| Signature
m|dbms.setDatabaseAllocator(allocator :: STRING?)
| Mode
a|WRITE
|===

[[procedure_dbms_setDefaultAllocationNumbers]]
.dbms.setDefaultAllocationNumbers() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a| With this method you can set the default number of primaries and secondaries.
| Signature
m|dbms.setDefaultAllocationNumbers(primaries :: INTEGER?, secondaries :: INTEGER?)
| Mode
a|WRITE
|===

[[procedure_dbms_setDefaultDatabase]]
.dbms.setDefaultDatabase() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a| Changes the default database to the provided value. 
The database must exist and the old default database must be stopped.
| Signature
m|dbms.setDefaultDatabase(databaseName :: STRING?) :: (result :: STRING?)
| Mode
a|WRITE
|===

[[procedure_dbms_scheduler_failedjobs]]
.dbms.scheduler.failedJobs() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
List failed job runs. There is a limit for amount of historical data.
| Signature
m|dbms.scheduler.failedJobs() :: (jobId :: STRING?, group :: STRING?, database :: STRING?, submitter :: STRING?, description :: STRING?, type :: STRING?, submitted :: STRING?, executionStart :: STRING?, failureTime :: STRING?, failureDescription :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|admin
|===


[[procedure_dbms_scheduler_groups]]
.dbms.scheduler.groups() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
List the job groups that are active in the database internal job scheduler.
| Signature
m|dbms.scheduler.groups() :: (group :: STRING?, threads :: INTEGER?)
| Mode
m|DBMS
// | Default roles
// m|admin
|===


[[procedure_dbms_scheduler_jobs]]
.dbms.scheduler.jobs() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
List all jobs that are active in the database internal job scheduler.
| Signature
m|dbms.scheduler.jobs() :: (jobId :: STRING?, group :: STRING?, submitted :: STRING?, database :: STRING?, submitter :: STRING?, description :: STRING?, type :: STRING?, scheduledAt :: STRING?, period :: STRING?, state :: STRING?, currentStateDescription :: STRING?)
| Mode
m|DBMS
// | Default roles
// m|admin
|===

[[procedure_dbms_security_clearauthcache]]
.dbms.security.clearAuthCache() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Clears authentication and authorization cache.
| Signature
m|dbms.security.clearAuthCache() :: VOID
| Mode
m|DBMS
// | Default roles
// m|admin
|===

[[procedure_dbms_setconfigvalue]]
.dbms.setConfigValue() label:enterprise-edition[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Update a given setting value.
Passing an empty value results in removing the configured value and falling back to the default value.
Changes do not persist and are lost if the server is restarted.
In a clustered environment, `dbms.setConfigValue` affects only the cluster member it is run against.
| Signature
m|dbms.setConfigValue(setting :: STRING?, value :: STRING?) :: VOID
| Mode
m|DBMS
// | Default roles
// m|admin
|===


[[procedure_dbms_showcurrentuser]]
.dbms.showCurrentUser()
[cols="<15s,<85"]
|===
| Description
a|
Show the current user.
| Signature
m|dbms.showCurrentUser() :: (username :: STRING?, roles :: LIST? OF STRING?, flags :: LIST? OF STRING?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===

[[procedure_dbms_showTopologyGraphConfig]]
.dbms.showTopologyGraphConfig() label:enterprise-only[] label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a| With this method the configuration of the Topology Graph can be displayed.
| Signature
m|dbms.showTopologyGraphConfig() :: (allocator :: STRING?, defaultPrimariesCount :: INTEGER?, defaultSecondariesCount :: INTEGER?, defaultDatabase :: STRING?)
| Mode
m|READ
|===

[[procedure_dbms_upgrade]]
.dbms.upgrade() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Upgrade the system database schema if it is not the current schema.
| Signature
m|dbms.upgrade() :: (status :: STRING?, upgradeResult :: STRING?)
| Mode
m|WRITE
// | Default roles
// m|admin
|===


[[procedure_dbms_upgradestatus]]
.dbms.upgradeStatus() label:admin-only[]
[cols="<15s,<85"]
|===
| Description
a|
Report the current status of the system database sub-graph schema.
| Signature
m|dbms.upgradeStatus() :: (status :: STRING?, description :: STRING?, resolution :: STRING?)
| Mode
m|READ
// | Default roles
// m|admin
|===

[[procedure_tx_getmetadata]]
.tx.getMetaData()
[cols="<15s,<85"]
|===
| Description
a|
Provides attached transaction metadata.
| Signature
m|tx.getMetaData() :: (metadata :: MAP?)
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===


[[procedure_tx_setmetadata]]
.tx.setMetaData()
[cols="<15s,<85"]
|===
| Description
a|
Attaches a map of data to the transaction.
The data will be printed when listing queries, and inserted into the query log.
| Signature
m|tx.setMetaData(data :: MAP?) :: VOID
| Mode
m|DBMS
// | Default roles
// m|reader, editor, publisher, architect, admin
|===
