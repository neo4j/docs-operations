[role=enterprise-edition]
[[dynamic-settings]]
= Dynamic settings
:description: How to change your Neo4j configuration while Neo4j is running, and which settings can be changed. 


[[dynamic-settings-introduction]]
== Introduction

Neo4j Enterprise Edition supports changing some configuration settings at runtime, without restarting the service.

[NOTE]
====
Changes to the configuration at runtime are not persisted.
To avoid losing changes when restarting Neo4j, make sure you update xref:configuration/file-locations.adoc[_neo4j.conf_] as well.

In a clustered environment, `CALL dbms.setConfigValue` affects only the cluster member it is run against, and it is not propagated to other members.
If you want to change the configuration settings on all cluster members, you have to run the procedure against each of them and update their _neo4j.conf_ file.
====


[[dynamic-settings-discover]]
== Discover dynamic settings

Use the procedure `dbms.listConfig()` to discover which configuration values can be dynamically updated, or consult xref:configuration/dynamic-settings.adoc#dynamic-settings-reference[Dynamic settings reference].

.Discover dynamic settings
====

[source, cypher]
----
CALL dbms.listConfig()
YIELD name, dynamic
WHERE dynamic
RETURN name
ORDER BY name
LIMIT 4;
----

[queryresult]
----
+----------------------------------------------+
| name                                         |
+----------------------------------------------+
| "dbms.checkpoint.iops.limit"                 |
| "dbms.logs.query.allocation_logging_enabled" |
| "dbms.logs.query.enabled"                    |
| "dbms.logs.query.page_logging_enabled"       |
+----------------------------------------------+
4 rows
----

====


[[dynamic-settings-procedure]]
== Update dynamic settings

An xref:authentication-authorization/terminology.adoc#term-administrator[administrator] is able to change some configuration settings at runtime, without restarting the service.

*Syntax:*

`CALL dbms.setConfigValue(_setting_, _value_)`

*Returns:*

Nothing on success.

*Exceptions:*

|===
| Unknown or invalid setting name.
| The setting is not dynamic and can not be changed at runtime.
| Invalid setting value.
|===

The following example shows how to dynamically enable query logging.

.Set a config value
====
[source, cypher]
----
CALL dbms.setConfigValue('dbms.logs.query.enabled', 'info')
----
====

If an invalid value is passed, the procedure will show a message to that effect.

.Try to set invalid config value
====
[source, cypher]
----
CALL dbms.setConfigValue('dbms.logs.query.enabled', 'yes')
----

[queryresult]
----
Failed to invoke procedure `dbms.setConfigValue`: Caused by: org.neo4j.graphdb.config.InvalidSettingException: Bad value 'yes' for setting 'dbms.logs.query.enabled': 'yes' not one of [OFF, INFO, VERBOSE]
----
====

To reset a config value to its default, pass an empty string as the _value_ argument.

.Reset a config value to default
====
[source, cypher]
----
CALL dbms.setConfigValue('dbms.logs.query.enabled', '')
----
====


[[dynamic-settings-reference]]
== Dynamic settings reference

//include::partial$/neo4j-config/dynamic-settings.adoc[tags=reference-dynamic-settings-reference]
//
//This file can be found in:
//neo4j-documentation/config-docs/target/docs/ops/dynamic-settings.adoc

xref:reference/configuration-settings.adoc#config_cypher.query_max_allocations[cypher.query_max_allocations]:: The maximum amount of heap memory allocations to for cypher to perform on a single query, in bytes (or kilobytes with the 'k' suffix, megabytes with 'm' and gigabytes with 'g').
xref:reference/configuration-settings.adoc#config_dbms.checkpoint.iops.limit[dbms.checkpoint.iops.limit]:: Limit the number of IOs the background checkpoint process will consume per second.
xref:reference/configuration-settings.adoc#config_dbms.logs.debug.level[dbms.logs.debug.level]:: Debug log level threshold.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.allocation_logging_enabled[dbms.logs.query.allocation_logging_enabled]:: Log allocated bytes for the executed queries being logged.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.enabled[dbms.logs.query.enabled]:: Log executed queries.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.page_logging_enabled[dbms.logs.query.page_logging_enabled]:: Log page hits and page faults for the executed queries being logged.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.parameter_logging_enabled[dbms.logs.query.parameter_logging_enabled]:: Log parameters for the executed queries being logged.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.rotation.keep_number[dbms.logs.query.rotation.keep_number]:: Maximum number of history files for the query log.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.rotation.size[dbms.logs.query.rotation.size]:: The file size in bytes at which the query log will auto-rotate.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.runtime_logging_enabled[dbms.logs.query.runtime_logging_enabled]:: Logs which runtime that was used to run the query.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.threshold[dbms.logs.query.threshold]:: If the execution of query takes more time than this threshold, the query is logged once completed - provided query logging is set to INFO.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.time_logging_enabled[dbms.logs.query.time_logging_enabled]:: Log detailed time information for the executed queries being logged.
xref:reference/configuration-settings.adoc#config_dbms.track_query_allocation[dbms.track_query_allocation]:: Enables or disables tracking of how many bytes are allocated by the execution of a query.
xref:reference/configuration-settings.adoc#config_dbms.track_query_cpu_time[dbms.track_query_cpu_time]:: Enables or disables tracking of how much time a query spends actively executing on the CPU.
xref:reference/configuration-settings.adoc#config_dbms.transaction.concurrent.maximum[dbms.transaction.concurrent.maximum]:: The maximum number of concurrently running transactions.
xref:reference/configuration-settings.adoc#config_dbms.transaction.sampling.percentage[dbms.transaction.sampling.percentage]:: Transaction sampling percentage.
xref:reference/configuration-settings.adoc#config_dbms.transaction.timeout[dbms.transaction.timeout]:: The maximum time interval of a transaction within which it should be completed.
xref:reference/configuration-settings.adoc#config_dbms.transaction.tracing.level[dbms.transaction.tracing.level]:: Transaction creation tracing level.
xref:reference/configuration-settings.adoc#config_dbms.tx_log.preallocate[dbms.tx_log.preallocate]:: Specify if Neo4j should try to preallocate logical log file in advance.
xref:reference/configuration-settings.adoc#config_dbms.tx_log.rotation.retention_policy[dbms.tx_log.rotation.retention_policy]:: Make Neo4j keep the logical transaction logs for being able to backup the database.
xref:reference/configuration-settings.adoc#config_dbms.tx_log.rotation.size[dbms.tx_log.rotation.size]:: Specifies at which file size the logical log will auto-rotate.
xref:reference/configuration-settings.adoc#config_fabric.routing.servers[fabric.routing.servers]:: A comma-separated list of Fabric instances that form a routing group.
