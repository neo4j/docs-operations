[role=enterprise-edition]
[[dynamic-settings]]
= Dynamic settings
:description: How to change your Neo4j configuration while Neo4j is running, and which settings can be changed. 


[[dynamic-settings-introduction]]
== Introduction

Neo4j Enterprise Edition supports changing some configuration settings at runtime, without restarting the service.

[NOTE]
====
Changes to the configuration at runtime are not persisted.
To avoid losing changes when restarting Neo4j, make sure you update xref:configuration/file-locations.adoc[_neo4j.conf_] as well.

In a clustered environment, `CALL dbms.setConfigValue` affects only the cluster member it is run against, and it is not propagated to other members.
If you want to change the configuration settings on all cluster members, you have to run the procedure against each of them and update their _neo4j.conf_ file.
====


[[dynamic-settings-discover]]
== Discover dynamic settings

Use the procedure `dbms.listConfig()` to discover which configuration values can be dynamically updated, or consult xref:configuration/dynamic-settings.adoc#dynamic-settings-reference[Dynamic settings reference].

.Discover dynamic settings
====

[source, cypher]
----
CALL dbms.listConfig()
YIELD name, dynamic
WHERE dynamic
RETURN name
ORDER BY name
LIMIT 4;
----

[queryresult]
----
+----------------------------------------------+
| name                                         |
+----------------------------------------------+
| "dbms.checkpoint.iops.limit"                 |
| "dbms.logs.query.allocation_logging_enabled" |
| "dbms.logs.query.enabled"                    |
| "dbms.logs.query.page_logging_enabled"       |
+----------------------------------------------+
4 rows
----

====


[[dynamic-settings-procedure]]
== Update dynamic settings

An xref:authentication-authorization/terminology.adoc#term-administrator[administrator] is able to change some configuration settings at runtime, without restarting the service.

*Syntax:*

`CALL dbms.setConfigValue(_setting_, _value_)`

*Returns:*

Nothing on success.

*Exceptions:*

|===
| Unknown or invalid setting name.
| The setting is not dynamic and can not be changed at runtime.
| Invalid setting value.
|===

The following example shows how to dynamically enable query logging.

.Set a config value
====
[source, cypher]
----
CALL dbms.setConfigValue('dbms.logs.query.enabled', 'info')
----
====

If an invalid value is passed, the procedure will show a message to that effect.

.Try to set invalid config value
====
[source, cypher]
----
CALL dbms.setConfigValue('dbms.logs.query.enabled', 'yes')
----

[queryresult]
----
Failed to invoke procedure `dbms.setConfigValue`: Caused by: org.neo4j.graphdb.config.InvalidSettingException: Bad value 'yes' for setting 'dbms.logs.query.enabled': 'yes' not one of [OFF, INFO, VERBOSE]
----
====

To reset a config value to its default, pass an empty string as the _value_ argument.

.Reset a config value to default
====
[source, cypher]
----
CALL dbms.setConfigValue('dbms.logs.query.enabled', '')
----
====


[[dynamic-settings-reference]]
== Dynamic settings reference

//include::{import-neo4j-config-docs-docs}/ops/dynamic-settings.adoc[tags=reference-dynamic-settings-reference]
//
//This file can be found in:
//neo4j-documentation/config-docs/target/docs/ops/dynamic-settings.adoc

xref:reference/configuration-settings.adoc#config_causal_clustering.cluster_allow_reads_on_leader[causal_clustering.cluster_allow_reads_on_leader]:: Configure if the `dbms.routing.getRoutingTable()` procedure should include the leader as read endpoint or return only read replicas/followers.
xref:reference/configuration-settings.adoc#config_causal_clustering.connect_randomly_to_server_group[causal_clustering.connect_randomly_to_server_group]:: Comma separated list of groups to be used by the connect-randomly-to-server-group selection strategy.
xref:reference/configuration-settings.adoc#config_causal_clustering.server_groups[causal_clustering.server_groups]:: A list of group names for the server used when configuring load balancing and replication policies.
xref:reference/configuration-settings.adoc#config_dbms.allow_single_automatic_upgrade[dbms.allow_single_automatic_upgrade]:: Whether to allow a system graph upgrade to happen automatically in single instance mode (dbms.mode=SINGLE).
xref:reference/configuration-settings.adoc#config_dbms.allow_upgrade[dbms.allow_upgrade]:: Whether to allow a store upgrade in case the current version of the database starts against an older version of the store.
xref:reference/configuration-settings.adoc#config_dbms.backup.incremental.strategy[dbms.backup.incremental.strategy]:: Strategy for incremental backup.
xref:reference/configuration-settings.adoc#config_dbms.checkpoint.iops.limit[dbms.checkpoint.iops.limit]:: Limit the number of IOs the background checkpoint process will consume per second.
xref:reference/configuration-settings.adoc#config_dbms.databases.default_to_read_only[dbms.databases.default_to_read_only]:: Whether or not any database on this instance are read_only by default.
xref:reference/configuration-settings.adoc#config_dbms.databases.read_only[dbms.databases.read_only]:: List of databases for which to prevent write queries.
xref:reference/configuration-settings.adoc#config_dbms.databases.writable[dbms.databases.writable]:: List of databases for which to allow write queries.
xref:reference/configuration-settings.adoc#config_dbms.lock.acquisition.timeout[dbms.lock.acquisition.timeout]:: The maximum time interval within which lock should be acquired. Zero (default) means timeout is disabled.
xref:reference/configuration-settings.adoc#config_dbms.logs.debug.level[dbms.logs.debug.level]:: Debug log level threshold.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.allocation_logging_enabled[dbms.logs.query.allocation_logging_enabled]:: Log allocated bytes for the executed queries being logged.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.early_raw_logging_enabled[dbms.logs.query.early_raw_logging_enabled]:: Log query text and parameters without obfuscating passwords.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.enabled[dbms.logs.query.enabled]:: Log executed queries.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.page_logging_enabled[dbms.logs.query.page_logging_enabled]:: Log page hits and page faults for the executed queries being logged.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.parameter_full_entities[dbms.logs.query.parameter_full_entities]:: Log complete parameter entities including id, labels or relationship type, and properties.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.parameter_logging_enabled[dbms.logs.query.parameter_logging_enabled]:: Log parameters for the executed queries being logged.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.rotation.keep_number[dbms.logs.query.rotation.keep_number]:: Maximum number of history files for the query log.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.rotation.size[dbms.logs.query.rotation.size]:: The file size in bytes at which the query log will auto-rotate.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.runtime_logging_enabled[dbms.logs.query.runtime_logging_enabled]:: Logs which runtime that was used to run the query.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.threshold[dbms.logs.query.threshold]:: If the execution of query takes more time than this threshold, the query is logged once completed - provided query logging is set to INFO.
xref:reference/configuration-settings.adoc#config_dbms.logs.query.time_logging_enabled[dbms.logs.query.time_logging_enabled]:: Log detailed time information for the executed queries being logged.
xref:reference/configuration-settings.adoc#config_dbms.memory.pagecache.flush.buffer.enabled[dbms.memory.pagecache.flush.buffer.enabled]:: Page cache can be configured to use a temporal buffer for flushing purposes.
xref:reference/configuration-settings.adoc#config_dbms.memory.pagecache.flush.buffer.size_in_pages[dbms.memory.pagecache.flush.buffer.size_in_pages]:: Page cache can be configured to use a temporal buffer for flushing purposes.
xref:reference/configuration-settings.adoc#config_dbms.memory.transaction.database_max_size[dbms.memory.transaction.database_max_size]:: Limit the amount of memory that all transactions in one database can consume, in bytes (or kilobytes with the 'k' suffix, megabytes with 'm' and gigabytes with 'g').
xref:reference/configuration-settings.adoc#config_dbms.memory.transaction.global_max_size[dbms.memory.transaction.global_max_size]:: Limit the amount of memory that all of the running transactions can consume, in bytes (or kilobytes with the 'k' suffix, megabytes with 'm' and gigabytes with 'g').
xref:reference/configuration-settings.adoc#config_dbms.memory.transaction.max_size[dbms.memory.transaction.max_size]:: Limit the amount of memory that a single transaction can consume, in bytes (or kilobytes with the 'k' suffix, megabytes with 'm' and gigabytes with 'g').
xref:reference/configuration-settings.adoc#config_dbms.security.ldap.authentication.attribute[dbms.security.ldap.authentication.attribute]:: The attribute to use when looking up users.
Using this setting requires `dbms.security.ldap.authentication.search_for_attribute` to be true and thus `dbms.security.ldap.authorization.system_username` and `dbms.security.ldap.authorization.system_password` to be configured.
xref:reference/configuration-settings.adoc#config_dbms.security.ldap.authentication.user_dn_template[dbms.security.ldap.authentication.user_dn_template]:: LDAP user DN template.
xref:reference/configuration-settings.adoc#config_dbms.security.ldap.authorization.group_membership_attributes[dbms.security.ldap.authorization.group_membership_attributes]:: A list of attribute names on a user object that contains groups to be used for mapping to roles when LDAP authorization is enabled.
xref:reference/configuration-settings.adoc#config_dbms.security.ldap.authorization.group_to_role_mapping[dbms.security.ldap.authorization.group_to_role_mapping]:: An authorization mapping from LDAP group names to Neo4j role names.
xref:reference/configuration-settings.adoc#config_dbms.security.ldap.authorization.user_search_base[dbms.security.ldap.authorization.user_search_base]:: The name of the base object or named context to search for user objects when LDAP authorization is enabled.
xref:reference/configuration-settings.adoc#config_dbms.security.ldap.authorization.user_search_filter[dbms.security.ldap.authorization.user_search_filter]:: The LDAP search filter to search for a user principal when LDAP authorization is enabled.
xref:reference/configuration-settings.adoc#config_dbms.track_query_allocation[dbms.track_query_allocation]:: Enables or disables tracking of how many bytes are allocated by the execution of a query.
xref:reference/configuration-settings.adoc#config_dbms.track_query_cpu_time[dbms.track_query_cpu_time]:: Enables or disables tracking of how much time a query spends actively executing on the CPU.
xref:reference/configuration-settings.adoc#config_dbms.transaction.concurrent.maximum[dbms.transaction.concurrent.maximum]:: The maximum number of concurrently running transactions.
xref:reference/configuration-settings.adoc#config_dbms.transaction.sampling.percentage[dbms.transaction.sampling.percentage]:: Transaction sampling percentage.
xref:reference/configuration-settings.adoc#config_dbms.transaction.timeout[dbms.transaction.timeout]:: The maximum time interval of a transaction within which it should be completed.
xref:reference/configuration-settings.adoc#config_dbms.transaction.tracing.level[dbms.transaction.tracing.level]:: Transaction creation tracing level.
xref:reference/configuration-settings.adoc#config_dbms.tx_log.preallocate[dbms.tx_log.preallocate]:: Specify if Neo4j should try to preallocate logical log file in advance.
xref:reference/configuration-settings.adoc#config_dbms.tx_log.rotation.retention_policy[dbms.tx_log.rotation.retention_policy]:: Tell Neo4j how long logical transaction logs should be kept to backup the database.For example, "10 days" will prune logical logs that only contain transactions older than 10 days.Alternatively, "100k txs" will keep the 100k latest transactions from each database and prune any older transactions.
xref:reference/configuration-settings.adoc#config_dbms.tx_log.rotation.size[dbms.tx_log.rotation.size]:: Specifies at which file size the logical log will auto-rotate.
xref:reference/configuration-settings.adoc#config_dbms.upgrade_max_processors[dbms.upgrade_max_processors]:: Max number of processors used when upgrading the store.
xref:reference/configuration-settings.adoc#config_fabric.routing.servers[fabric.routing.servers]:: A comma-separated list of Fabric instances that form a routing group.
