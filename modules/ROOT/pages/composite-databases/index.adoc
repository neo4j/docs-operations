[role=enterprise-edition]
[[composite-databases]]
= Composite databases
:description: An introduction to composite databases.

[[composite-databases-introduction]]
== Introduction

Neo4j v5 introduces a type of database called _composite database_that makes possible the incorporation of the previous Fabric technology into the Neo4j cluster and standalone server without the need to deploy a dedicated Fabric proxy (as in Neo4j 4.x).

A composite database gives access to graphs found on other databases (local, remote, or sharded) and *does not store data* independently.
The composite databases leverage the Fabric technology and `REMOTE DATABASE ALIAS`, to provide a dynamically configurable, simple, and unified way of accessing partitioned data or data spread across multiple Neo4j DBMSs.

A Neo4j DBMS can have multiple composite databases, and they can be created both in standalone and cluster deployments.

Composite databases enable:

* *Data Federation*: the ability to access data available in distributed sources in the form of *disjointed graphs*.
* *Data Sharding*: the ability to access data available in distributed sources in the form of a *common graph partitioned on multiple databases*.

// The following diagram shows a Neo4j cluster with two composite databases, `db1` and `db2`, each of them accessing data from two different databases, `db1` and `db2`, respectively.

// image::../images/composite-databases.png[title="Composite databases", role="middle"]

== Composite database vs Fabric

Composite databases are a new type of database that replaces the previous Fabric technology.
The following table summarizes the similarities and differences between the two.

.Composite database vs Fabric
[cols="<24s,38,38",frame="topbot",options="header"]
|===
| | Composite database | Fabric

| Neo4j version compatibility 
| Neo4j 5.x 
| Neo4j 4.1 to 4.4.

| Neo4j edition compatibility
2+| Enterprise Edition

| Data access 
2+| Gives access to graphs found on other databases (local, remote, or sharded).

| Data storage 
2+| Does not store data independently. 

| Deployment 
| Both standalone and cluster deployments. 
| Both standalone and cluster deployments. However, in a cluster deployment, the Fabric proxy must be deployed on a dedicated machine.

| Configuration 
| Managed using Cypher commands. Composite databases are created with the `CREATE COMPOSITE DATABASE` command and database aliases are added with `CREATE ALIAS ..`. 
| Managed through configuration settings. The Neo4j DBMSs that host the same Fabric virtual database must have the same configuration settings. The configuration must be kept in sync and applied by the Database Administrator.

| Sharding an existing database 
2+| With the help of the `neo4j-admin copy` command. 

| Security credentials 
| Composite databases use the same user credentials as the database aliases. 
| The Neo4j DBMSs that host the same Fabric virtual database must have the same user credentials. Any change of password on a machine that is part of Fabric must be kept in sync and applied to all the Neo4j DBMSs that are part of Fabric.

| Database management 
2+| Does not support database management. Any database management commands, index and constraint management commands, or user and security management commands must be issued directly to the DBMSs and databases that are part of the composite database setup. 

| Transactions
2+| Only transactions with queries that read from multiple graphs, or read from multiple graphs and write to a single graph, are allowed.

| Neo4j embedded 
2+| Not available when Neo4j is used as an embedded database in Java applications. It can be used only in a typical client/server mode, when users connect to a Neo4j DBMS from their client application or tool, via Bolt or HTTP protocol. 
|===